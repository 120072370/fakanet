<?php    require_once 'common.php';	session_start();	/* 被允许的文件后缀 */	$allow_types = array('gif', 'jpeg', 'jpg', 'png', 'bmp', 'ico', 'icon', 'zip', 'xls', 'txt', 'ppt', 'doc');	if($_FILES['orgFile']['error'] > 0){		die(json_encode(array('ret' => 'err', 'msg' => $_FILES['orgFile']['error'], 'errcode' => 10004)));	}	$fileParts = pathinfo($_FILES['orgFile']['name']);	if(!in_array($fileParts['extension'], $allow_types)){		die(json_encode(array('ret' => 'err', 'msg' => '不支持该类型文件', 'errcode' => 10005)));	}		/* 数据检测通过，进行存储操作 */	$file_name = "/uploads/images/auth/" . $_SESSION['login_username'] . '-' . date('Ymdhis', time()) . ".{$fileParts['extension']}";	try{		move_uploaded_file($_FILES['orgFile']['tmp_name'], $_SERVER['DOCUMENT_ROOT'] . $file_name);	}catch(Exception $e){		die(json_encode(array('ret' => 'err', 'msg' => $e->getMessage(), 'errcode' => 10006)));		}	die(json_encode(array('ret' => 'succ', 'msg' => '文件上传成功!', 'data' => $file_name, 'errcode' => 0)));?>